#### 数据完整性

一种是在定义表时声明数据完整性，称为**声明完整性**。
另一种是在服务器端编写触发器来实现，称为**过程完整性**。

##### 完整性约束条件的作用对象 

###### 1. 列级约束

对数据类型的约束
对数据格式的约束
对取值范围或取值集合的约束
对空值的约束

###### 2. 元组约束

元组中各个字段之间的联系的约束，如：开始日期小于结束日期。

###### 3. 关系约束

是若干元组之间、关系之间的联系的约束。 

##### 实现数据（声明）完整性 

###### 1. 主码约束

每个表只能有一个PRIMARY KEY约束；
用PRIMARY KEY约束的列取值不能有重复，而且不允许有空值；
**添加**主码约束的语法格式：

```sql
ALTER TABLE 表名
ADD [ CONSTRAINT 约束名]
PRIMARY KEY （<列名> [, … n] ）
```

###### 2. UNIQUE约束

限制在一个列中**不能**有**重复**的值

```sql
ALTER TABLE 表名
ADD [ CONSTRAINT 约束名]
UNIQUE（<列名> [, … n] ）
```

* 允许有**一个空值**；
* 在**一个表**中可以定义多个UNIQUE约束  --  可以在**一个列**或**多个列**上定义**UNIQUE**约束。

###### 3. 外码约束

实现引用完整性，参照表（主表）
外码所**引用的列**必须是有**PRIMARY KEY**约束或**UNIQUE**约束的列。

```sql
ALTER TABLE 表名
ADD [ CONSTRAINT 约束名]
FOREIGN KEY（<列名>）
REFERENCES 引用表名（<列名>）
```

###### 4. DEFAULT约束

用于提供列的**默认值**
**只有**在向表中**插入**数据时才检查DEFAULT约束

```sql
ALTER TABLE 表名
ADD [ CONSTRAINT 约束名 ]
DEFAULT 默认值 FOR 列名
```

###### 5. CHECK约束

用于限制列的取值在指定的范围内，使数据库中存放的值都是有意义的。
系统在执行**INSERT**语句和**UPDATE**语句时**自动检查**CHECK约束。
CHECK约束可约束同一个表中多个列之间的取值关系。

```sql
ALTER TABLE 表名
ADD [ CONSTRAINT 约束名 ]
CHECK （逻辑表达式） 
```

###### 6. 删除约束

```sql
ALTER TABLE 表名
drop CONSTRAINT 约束名
```



##### 实现过程完整性 

过程完整性是指在**服务器端**通过编写实现约束的一段代码(T-SQL语句)来实现数据完整性约束，这段代码就称为**触发器**。
触发器可以实现一般声明性数据完整性约束所实现不了的**复杂的完整性约束**。 

