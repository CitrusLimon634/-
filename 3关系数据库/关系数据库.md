#### 关系模型

关系模型是一种**组织层数据模型**，面向计算机应用。关系数据库是基于关系数据模型的数据库

**关系模型**的组成（二特征、三要素）

###### 静态特征

关系数据结构：二维表
数据完整性约束：实体、参照和用户定义

###### 动态特征

定义在关系上的各种操作：
传统的集合运算、专门的关系运算和有关 的数据操作

常用的关系操作有两类

###### 查询

传统的集合运算：并、交、差、笛卡尔积
专门的关系运算：选择、投影、连接、除

###### 数据更新

插入、删除、修改
其中查询操作的表达能力是**最主要**的部分
关系操作的特点：
操作的对象和结果都是**集合**（二维关系表）

##### 关系模型的基本术语

* 关系：关系就是二维表，并满足如下性质：
  * 关系表中的每列都是不可再分的数据项；
  * 表中的行、列次序并不重要；
* 属性（字段、列）：表中每一列是一个属性值集，反映实体某个性质。列名，即属性名，不能重复。
* 值域：属性的取值范围。如，0≤分数≤100，学分只能取{1，2，3，4，5，6}等。
* 元组（记录、行）：表中每一行称作是一个元组，它相当于一个记录值，任意两个元组不能相同。
* 分量：元组中的每个属性值称为元组的一个分量，n元关系的每个元组有n个分量。
* 关系模式：R（U，D，Dom，F）
  R－关系名；　U－属性名集合；　D－属性的值域；
  Dom－属性类型、长度；　F－属性间函数依赖集；
* 关系模式简记为：R（A1，A2，…，An）

###### 键

* 关系数据库：对应于某个实际应用的**所有关系表的集合**称为关系数据库。
* 候选键：能够惟一标识关系中的每个元组的一个属性或最小的属性组(对应概念层模型中码)
  一个关系**至少有一个候选键**，可能不止一个。
  最简单的情况，候选键只包含一个属性。
  最极端的情况，关系模式的所有属性是这个关系模式的候选码，称为全键。
* 主键：被数据库设计者选中，用来在同一实体集中区分不同实体的候选键。（关键字）
* 主键的作用：分辨记录、建立索引、快速查找、排序、保持参照完整性等。
* 主属性：包含在任一候选码中的属性称为是主属性。
* 非主属性：不包含在任一候选码中的属性称为非主属性。
* 外键：当前关系模式的某个属性组是另外一个关系模式的主键。（外部关键字） 

##### 关系模式的形式化定义

关系模式是建立在**数据集合**的基础上，下面从集合论的角度给出关系数据结构的形式化定义。
　1．关系的形式化定义
为了给出形式化定义，首先给出笛卡尔积的定义。设D1，D2，…，Dn为任意集合，定义笛卡尔积　为：D1×D2× …×Dn 
＝{(d1，d2，…，dn) | di∈Di，i＝1，2，…，n }
其中每个元素（d1，d2，…，dn）称为一个n元组，简称**元组**。元组中每一个d~i~称为是一个**分量**。 



#### 关系数据库的完整性约束

**实体完整性、参照完整性、用户定义的完整性**
实体完整性和参照完整性是关系模型必须满足的完整性约束条件，被称作是关系的两个不变性，应该由DBMS自动支持。

###### 实体完整性

实体完整性是保证关系中的每个元组都是**可识别**的和**惟一**的。
表中不允许存在如下的记录：

* 无主码值的记录
* 主码值相同的记录

###### 参照完整性  --  外键约束

参照完整性是指对两个关系，其中一个关系中某些属性的取值受另一关系中某些属性取值范围的约束。 
一般通过外码来实现。
外码：设F是基本关系R的一个或一组属性，F不是关系R的码。如果F与基本关系S的主码Ks相对应，则称F是基本关系R的外码。基本关系R称为**参照**关系（子表），基本关系S称为**被参照**关系（主表）。
外码值必须先在主表中生成，后在子表中被参照引用。

**参照完整性规则**就是定义参照关系的外码与被参照关系主码之间的**引用规则**。
若属性（或属性组）F是基本关系R的外码，它与基本关系S的主码K~s~相对应（关系R和S不一定是不同的关系），则对于关系R的每个元组在外码F上的值必须为：

* 或者值为空；
* 或者等于其所引用的基本关系S中某个元组的主码值。

###### 用户定义完整性  --  约束

根据应用要求，属性数据有：
类型与长度限制：方便计算机操作
取值范围限制：防止属性值与应用语义矛盾







###### 传统的集合运算

| 运算符 | 含义         |
| ------ | ------------ |
| ∪      | 并           |
| ∩      | 交           |
| －     | 差           |
| ×      | 广义笛卡尔积 |

###### 专门的关系运算

| 运算符                                                       | 含义 |
| ------------------------------------------------------------ | ---- |
| σ                                                            | 选择 |
| ∏                                                            | 投影 |
| ![image-20201208215004052](C:\Users\honghangzhi\AppData\Roaming\Typora\typora-user-images\image-20201208215004052.png) | 连接 |
| ÷                                                            | 除   |



选择
select *

投影
选择指定属性
select Sno,Sname

除
