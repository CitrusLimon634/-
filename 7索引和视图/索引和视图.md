#### 索引

存储结构：
B树（Balanced Tree）

#### 聚簇索引

*  **数据按聚簇索引列值进行物理排序。**
* 类似于电话号码簿中数据按姓氏排列。
*  **一个表只包含一个聚簇索引。默认地在主码上创建聚簇索引**
* 一个聚簇索引可以包含多个列。 
* 叶级节点即是索引页，也是数据页

将聚簇索**应用**于： 

* 包含大量**非重复值**的列。
* 使用：BETWEEN、>、>=、< 和 <=返回一个范围值的查询。
* 被**连续访问**的列。
* 返回大型结果集的**查询列**。
* 经常被**用作联接**的列，一般来说，这些是**外码列**。
* 对**ORDER BY**或**GROUP BY**子句中指定的列进行索引。 

不适用于：

* **频繁更改的列**，因为这将导致整行发生移动。
* **字节长的列**。因为聚簇索引的键值将被其它非聚簇索引作为查找键使用，并被存储在每个非聚簇索引的B树的叶级索引项中，在字节长的列上作聚簇索引会大大增加**索引文件**的大小。 

#### 非聚簇索引

数据行不按非聚集索引键值的顺序排序和存储。
叶层不包含数据页。
非聚集索引B树的叶级节点是索引行。每个索引行包含非聚集索引关键字值以及一个或多个行定位器，这些行定位器指向该关键字值对应的数据行（如果索引不唯一，则可能是多行）

###### 应用于：

* 包含大量非重复值的列。
* **不返回大型结果集**的查询。
* 经常作为查询条件使用的列。
* 经常作为连接和分组条件的列。 

###### 唯一索引：

确保索引列不包含重复值。
在组合唯一索引的情况下，可以确保索引列中每个值的组合都是唯一的。
例，如果在last_name、first_name和middle_initial列的组合上创建了唯一索引full_name，则该表中任何两个人都不可以具有完全相同的名字。
聚集索引和非聚集索引都可以是唯一的。只要列中的数据**是唯一**的，就**可以**在同一个表上**创建一个唯一**的聚簇索引和**多个唯一**的非聚簇索引。 

###### 说明

如果必须要实施**唯一性**来确保数据的完整性，则应在列上创建**UNIQUE**约束或**PRIMARY KEY**约束，而不要创建唯一索引。
例如，如果限制身份证号码（sid）列的取值不重复，则可在sid列上创建UNIQUE约束。
实际上，当在表上创建PRIMARY KEY约束或UNIQUE约束时，系统会自动在这些列上创建唯一索引。 

###### 创建索引

```sql
CREATE [UNIQUE] [CLUSTERED | NONCLUSTERED]
INDEX 索引名 ON 表名（列名[...n]）
```

UNIQUE 唯一索引

CLUSTERED聚集索引，默认创建非聚集索引

###### 删除索引

```sql
DROP INDEX <表名>.<索引名>
```

##### 视图

###### 创建视图

```sql
CREATE VIEW <视图名> [(列名[,...n])]  --别名
AS 
  SELECT语句
```

* 1)查询语句通常不包含**ORDER BY**和**DISTINCT**子句

* 2)CREATE子句列名全写或不写

  ***必须指定列名的情况***：

  * 目标列是**函数**或**表达式**，并且没有取别名

  * 多表连接选了多个**同名列**

  * 需要在视图中取别名

###### 修改视图

```sql
ALTER VIEW 视图名 [(列名[,...n])]
AS
  查询语句
```

###### 删除视图

```sql
DROP VIEW <视图名>
```



###### 1.定义单源表视图

可用于**修改**和**查询**

###### 2.定义多源表视图

一般只用于**查询**

###### 3.在已有视图上定义新视图

###### 4.定义带表达式的视图

* 定义**基本表**时，为减少数据冗余，表中只存放**基本数据**。
* 由基本数据经过各种计算派生出的数据一般不存储在基本表中，临时生成。
* 由于视图中的数据并不实际存储，因此，可以在在视图中设置一些附加列来保存这些派生的数据。
* 由于这些附加列在基本表中并不实际存在，因此称这些列为**虚拟列**。
* 称包含虚拟列的视图为**带表达式的视图**。

###### 5.含分组统计信息的视图(只看不能改)

GROUP BY